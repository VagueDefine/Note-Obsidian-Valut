# 最优秀停止理论

[李永乐寻找爱情](https://www.youtube.com/watch?v=pelPCK22W7k)


## 一、古希腊哲学家苏格拉底麦田理论
麦田麦穗选择游戏，只能选一个只能往前不能往后
- 弟子一：选了第一个，遗憾
- 弟子二：一个都没选，空手而归
## 二、秘书问题
1960年马丁加德纳，在《趣味数学》中讲述
- 秘书选择问题
	- 首先谁当一个样本，样本区间用于制定标准，一个都不选
	- 然后将剩余部分与样本区间对比，遇到比样本区间好的就接受


## 三、女神恋爱爱情问题
### 特殊
#### 1次——接受——100%（相对的）
#### 2次——接受A拒绝B/接受B拒绝A——50%优秀
#### 3次进行选择，其中优秀程度为1、2、3

| 人选  | 一   | 二   | 三   | 四   | 五   | 六   |
| --- | --- | --- | --- | --- | --- | --- |
| A   | 1   | 1   | 2   | 2   | 3   | 3   |
| B   | 2   | 3   | 1   | 3   | 1   | 2   |
| C   | 3   | 2   | 3   | 1   | 2   | 1   |
##### 选取0个样本
$P_{最优}=\frac{2}{6}=\frac{1}{3}$
##### 选取1个样本
$P_{最优}=\frac{3}{6}=\frac{1}{2}$
##### 选取2个样本
$P_{最优}=\frac{2}{6}=\frac{1}{3}$

### 一般

| 恋爱次数 | 样本个数 | 最优概率 |
| ---- | ---- | ---- |
| 4    | 1    |      |
| 5    | 2    |      |
| 10   | 3    |      |
| 100  | 37   |      |
| 1000 | 368  |      |
#### 数学表达式
$$P_{最优}=-xlnx \tag{1}$$
求解最大值为：$\frac{1}{e}$
![](0000assets/最优秀停止理论——爱情的选择/file-20260111185733946.jpg)

![最值](0000assets/最优秀停止理论——爱情的选择/file-20260111185733946.jpg)


#### 注意
- 不要成为样本
- 争取样本后第一个
- 逃离囚犯困境

# 最优停止理论在工程决策中的应用解析

最优停止理论（Optimal Stopping Theory）是概率论与决策论的核心分支，核心目标是**在有限次选择机会中，通过制定停止规则来最大化选中最优选项的概率**，最经典的应用场景是“秘书问题”（Secretary Problem）。

下面从**核心模型假设、计算推导、结论与扩展**三个维度，详细说明最优停止理论的计算方法。

### 一、 核心模型：秘书问题的基本假设

为了简化计算，秘书问题设定了以下理想条件：

1. **候选者总数固定**：假设有  $n$  个候选者，依次面试，面试顺序随机且所有候选者的优劣排序唯一。

2. **决策不可逆**：面试后必须立即决定“录用”或“拒绝”，拒绝后无法反悔，录用后流程立即终止。

3. **评价标准唯一**：可以准确判断当前候选者是否优于之前所有面试过的候选者（即“相对最优”），但无法预知后续候选者的水平。

4. **目标明确**：最大化选中**全局最优候选者**的概率。

### 二、 计算推导：最优停止点的数学证明

我们的核心问题是：**选择前  $k$  个候选者作为“样本参考”（全部拒绝），之后只要遇到比这 $k$  个都优秀的候选者就立即录用，如何确定最优的 ** $k$  ** 值？**

#### 1.  定义事件与概率

设  $P(n,k)$  为采用“前  $k$  个拒绝，之后选相对最优”策略时，选中全局最优候选者的概率。

全局最优候选者的位置是随机的，假设其出现在第  $i$  个位置（ $i = 1,2,...,n$ ）。

- 若  $i \le k$ ：全局最优被当作样本拒绝，概率为  $0$ ；

- 若  $i > k$ ：要选中全局最优，需要满足**前 ** $i-1$  ** 个候选者中的最优者出现在前  $k$ 个里**（这样第  $i$  个才会被判定为“优于之前所有”而被录用）。

前  $i-1$  个候选者的最优者出现在前  $k$  个的概率为  $\frac{k}{i-1}$ 。

#### 2.  概率求和与近似

全局最优出现在第  $i$  个位置的概率为  $\frac{1}{n}$ ，因此总概率为：

 $P(n,k)=\sum_{i=k+1}^{n}\frac{1}{n}\cdot\frac{k}{i-1}$ 

令  $j = i-1$ ，则求和式可简化为：

 $P(n,k)=\frac{k}{n}\sum_{j=k}^{n-1}\frac{1}{j}$ 

#### 3.  连续化近似与极限求解

当  $n$  很大时，求和项  $\sum_{j=k}^{n-1}\frac{1}{j}$  可以用**积分近似**（调和级数的积分近似： $\sum_{j=a}^{b}\frac{1}{j}\approx\int_{a}^{b}\frac{1}{x}dx=\ln b-\ln a$ ）。

令  $x = \frac{k}{n}$ （即  $k = xn$ ），则当  $n \to \infty$  时：

 $P(n,k)\approx\frac{k}{n}\int_{k}^{n}\frac{1}{x}dx=\frac{k}{n}(\ln n-\ln k)=x(-\ln x)$ 

此时问题转化为：求  $x \in (0,1)$  使得函数  $f(x)=-x\ln x$  取得最大值。

对  $f(x)$  求导并令导数为  $0$ ：

 $f'(x)=-\ln x -1 = 0 \implies \ln x = -1 \implies x=\frac{1}{e}$ 

其中  $e$  是自然常数，约等于  $2.71828$ 。

### 三、 核心结论与应用

1. **最优停止比例**

当候选者总数  $n$  很大时，最优的参考样本比例为  $\frac{1}{e}\approx 36.8%$ ，即需要先拒绝前  $36.8%$  的候选者，之后遇到相对最优就停止选择。

此时选中全局最优的概率约为  $\frac{1}{e}\approx 36.8%$ 。

1. **有限 ** $n$  ** 的最优 ** $k$  ** 值**

当  $n$  较小时，需要直接计算  $P(n,k)$  并取最大值对应的  $k$ ，例如：

| $n$ （候选者数） | 最优  $k$ （参考样本数） | 最优概率  $P(n,k)$ |
| ---------- | --------------- | -------------- |
| 10         | 4               | 40.0%          |
| 20         | 7               | 38.4%          |
| 50         | 19              | 37.4%          |
| 100        | 37              | 37.1%          |
可以看到，随着  $n$  增大，最优概率逐渐趋近于 $36.8\%$。


### 四、 关键注意事项

- 最优停止理论的核心是**“用样本换信息”**，36.8% 是“信息充分性”与“选择机会”的平衡点；

- 该理论适用于**无反馈、不可逆**的一次性决策场景，如求职、租房、择偶等，但不适用于可重复尝试的场景（如产品测试）。

---
